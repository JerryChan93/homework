<!DOCTYPE html>
<html>
<head>
	<style type="text/css" media="screen">
		#id-canvas {
			border: 1px solid black;
		}
	</style>
	<title></title>
</head>
<body>
	<canvas id="id-canvas" height="350" width="500">
		
	</canvas>
	<script type="text/javascript">
		var imageFromPath = function (path) {
			var img = new Image()
			img.src = path
			return img
		}
		var Paddle = function () {
			var img = imageFromPath('img/paddle.png')
			var o = {
				img : img,
				x : 200,
				y : 300,
				speed : 5,
			}
			o.moveLeft = function () {
				o.x -= o.speed
			}
			o.moveRight = function () {
				o.x += o.speed
			}
			return o
		}

		var __main = function () {
			var log = console.log.bind(console)

			var canvas = document.getElementById('id-canvas')
			var context = canvas.getContext('2d')

			var paddle = Paddle()

			var leftDown = rightDown = false
			var fps = 30

			window.addEventListener('keydown', function (event) {
				var k = event.key
				if (k == 'a' || k == 'ArrowLeft') {
					leftDown = true
				} else if (k == 'd' || k == 'ArrowRight') {
					rightDown = true
				}
			})

			window.addEventListener('keyup', function (event) {
				var k = event.key
				if (k == 'a' || k == 'ArrowLeft') {
					leftDown = false
				} else if (k == 'd' || k == 'ArrowRight') {
					rightDown = false
				}
			})



			setInterval(function () {
				if (leftDown && (paddle.x > 0)) {
					paddle.moveLeft()
				} else if (rightDown && (paddle.x < 430)) {
					paddle.moveRight()
				}
				context.clearRect(0,0, canvas.width, canvas.height)
				context.drawImage(paddle.img, paddle.x, paddle.y)
			}, 1000/fps)
		}
		__main()
	</script>
</body>
</html>